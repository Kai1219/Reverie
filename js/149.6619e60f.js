(self["webpackChunkreverie"]=self["webpackChunkreverie"]||[]).push([[149],{2776:function(e,t,s){
/*!
  * Bootstrap toast.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,a){e.exports=a(s(9286),s(3175),s(5695))})(0,(function(e,t,s){"use strict";const a=e=>e&&"object"===typeof e&&"default"in e?e:{default:e},o=a(e),i=a(t),l=a(s),r=e=>null===e||void 0===e?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),n=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&"#"!==s?s.trim():null}return t},c=e=>{const t=n(e);return t?document.querySelector(t):null},d=e=>!(!e||"object"!==typeof e)&&("undefined"!==typeof e.jquery&&(e=e[0]),"undefined"!==typeof e.nodeType),u=(e,t,s)=>{Object.keys(s).forEach((a=>{const o=s[a],i=t[a],l=i&&d(i)?"element":r(i);if(!new RegExp(o).test(l))throw new TypeError(`${e.toUpperCase()}: Option "${a}" provided type "${l}" but expected type "${o}".`)}))},m=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||("undefined"!==typeof e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),h=e=>{e.offsetHeight},f=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},p=[],_=e=>{"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",(()=>{p.forEach((e=>e()))})),p.push(e)):e()},g=e=>{_((()=>{const t=f();if(t){const s=e.NAME,a=t.fn[s];t.fn[s]=e.jQueryInterface,t.fn[s].Constructor=e,t.fn[s].noConflict=()=>(t.fn[s]=a,e.jQueryInterface)}}))},b=(e,t="hide")=>{const s=`click.dismiss${e.EVENT_KEY}`,a=e.NAME;o.default.on(document,s,`[data-bs-dismiss="${a}"]`,(function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),m(this))return;const o=c(this)||this.closest(`.${a}`),i=e.getOrCreateInstance(o);i[t]()}))},v="toast",y="bs.toast",w=`.${y}`,x=`mouseover${w}`,$=`mouseout${w}`,k=`focusin${w}`,T=`focusout${w}`,C=`hide${w}`,D=`hidden${w}`,E=`show${w}`,L=`shown${w}`,I="fade",V="hide",M="show",j="showing",W={animation:"boolean",autohide:"boolean",delay:"number"},z={animation:!0,autohide:!0,delay:5e3};class A extends l.default{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return W}static get Default(){return z}static get NAME(){return v}show(){const e=o.default.trigger(this._element,E);if(e.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(I);const t=()=>{this._element.classList.remove(j),o.default.trigger(this._element,L),this._maybeScheduleHide()};this._element.classList.remove(V),h(this._element),this._element.classList.add(M),this._element.classList.add(j),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(M))return;const e=o.default.trigger(this._element,C);if(e.defaultPrevented)return;const t=()=>{this._element.classList.add(V),this._element.classList.remove(j),this._element.classList.remove(M),o.default.trigger(this._element,D)};this._element.classList.add(j),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(M)&&this._element.classList.remove(M),super.dispose()}_getConfig(e){return e={...z,...i.default.getDataAttributes(this._element),..."object"===typeof e&&e?e:{}},u(v,e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t;break}if(t)return void this._clearTimeout();const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){o.default.on(this._element,x,(e=>this._onInteraction(e,!0))),o.default.on(this._element,$,(e=>this._onInteraction(e,!1))),o.default.on(this._element,k,(e=>this._onInteraction(e,!0))),o.default.on(this._element,T,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=A.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}return b(A),g(A),A}))},8319:function(e,t,s){"use strict";var a=s(2776),o=s.n(a);t["Z"]={methods:{openToasts(){this.toast.show()},hideToasts(){this.toast.hide()}},mounted(){this.toast=new(o())(this.$refs.toast)}}},7257:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var a=s(6252),o=s(3577);const i={class:"position-fixed toast-div"},l={class:"toast text-white bg-danger border-0",ref:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},r={class:"d-flex"},n={class:"toast-body"},c=(0,a._)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function d(e,t,s,d,u,m){return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",l,[(0,a._)("div",r,[(0,a._)("div",n,(0,o.zw)(s.message),1),c])],512)])}var u=s(8319),m={props:["message"],mixins:[u.Z]},h=s(3744);const f=(0,h.Z)(m,[["render",d]]);var p=f},2353:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var a=s(6252),o=s(3577);const i=(0,a._)("section",{class:"section-top mb-5"},[(0,a._)("div",{class:"bg-top banner-order pic"},[(0,a._)("div",{class:"text-center w-100 h-100 mask z-index-3 position-relative"},[(0,a._)("div",{class:"position-absolute top-50 start-50 translate-middle"},[(0,a._)("h2",null,"結帳流程"),(0,a._)("p",null,"Checkout")])])])],-1),l={class:"container mb-5"},r=(0,a.uE)('<section class="cart-progress my-5"><ol class="progress-list container row g-0"><li class="col-4"><span class="step mb-2 text-white">1</span> 購物車 </li><li class="col-4 active"><span class="step mb-2 text-white">2</span>填寫資料 </li><li class="col-4"><span class="step mb-2 text-white">3</span>訂單完成 </li></ol></section>',1),n={class:"row"},c={class:"col-12 col-lg-6 mb-5"},d={class:"bg-primary text-white"},u={class:"m-0 p-2"},m={class:"cart px-2 p-sm-5 pb-sm-2"},h={class:"table align-middle"},f=(0,a._)("div",{class:"thead row"},[(0,a._)("div",{class:"col-md-6"},"商品資料"),(0,a._)("div",{class:"col-md-3"},"數量"),(0,a._)("div",{class:"col-md-3"},"小計"),(0,a._)("hr")],-1),p={class:"col-5 col-sm-3"},_={class:"col-3 col-sm-3"},g={class:"d-inline-block col my-auto text-center"},b={class:"col-2 col-sm-3"},v={class:"m-0"},y={class:"col-2 col-sm-3 order-md-4 order-4"},w={key:0,class:"m-0"},x={key:1,class:"m-0 text-info"},$={class:"my-3"},k={class:"d-flex flex-column align-items-end"},T={key:0,class:"text-success text-end"},C={class:"d-inline bg-success text-white p-2"},D={class:"mt-2"},E={class:"fw-normal"},L={class:"col-12 col-lg-6"},I=(0,a._)("div",{class:"bg-primary text-white"},[(0,a._)("h4",{class:"m-0 p-2"},"訂購資訊")],-1),V={class:"mb-3"},M=(0,a._)("label",{for:"email",class:"form-label"},[(0,a.Uk)("Email"),(0,a._)("span",{class:"text-danger"}," *")],-1),j={class:"mb-3"},W=(0,a._)("label",{for:"name",class:"form-label"},[(0,a.Uk)("收件人姓名"),(0,a._)("span",{class:"text-danger"}," *")],-1),z={class:"mb-3"},A=(0,a._)("label",{for:"tel",class:"form-label"},[(0,a.Uk)("收件人手機"),(0,a._)("span",{class:"text-danger"}," *")],-1),q={class:"mb-3"},N=(0,a._)("label",{for:"address",class:"form-label"},[(0,a.Uk)("收件人地址"),(0,a._)("span",{class:"text-danger"}," *")],-1),U={class:"mb-3"},S=(0,a._)("label",{for:"message",class:"form-label"},"留言",-1),X=(0,a._)("div",{class:"d-flex justify-content-center mt-5"},[(0,a._)("button",{type:"submit",class:"btn btn-primary mb-3"},"送出訂單")],-1);function O(e,t,s,O,Z,H){const K=(0,a.up)("v-field"),Q=(0,a.up)("ErrorMessage"),Y=(0,a.up)("v-form"),P=(0,a.up)("ErrorToast"),R=(0,a.up)("Loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,(0,a._)("main",l,[r,(0,a._)("section",n,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("h4",u,"購物車("+(0,o.zw)(Z.cartData.carts.length)+"件)",1)]),(0,a._)("div",m,[(0,a._)("table",h,[f,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Z.cartData.carts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"row p-1 p-sm-3 align-items-center justify-content-center g-0",key:e.id},[(0,a._)("div",p,[(0,a._)("div",{class:"pic ratio ratio-1x1",style:(0,o.j5)({backgroundImage:`url(${e.product.imageUrl})`})},null,4)]),(0,a._)("div",_,[(0,a._)("p",g,(0,o.zw)(e.product.title),1)]),(0,a._)("div",b,[(0,a._)("p",v,(0,o.zw)(e.qty)+(0,o.zw)(e.product.unit),1)]),(0,a._)("div",y,[e.product.origin_price===e.product.price?((0,a.wg)(),(0,a.iD)("p",w,(0,o.zw)(e.total)+"元 ",1)):((0,a.wg)(),(0,a.iD)("p",x,(0,o.zw)(e.total)+"元",1))])])))),128))]),(0,a._)("div",$,[(0,a._)("div",k,[(0,a._)("p",null,"小計:NT$"+(0,o.zw)(Z.cartData.total),1),Z.discountCoupon.code?((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("p",C," 已套用優惠券:"+(0,o.zw)(Z.discountCoupon.code),1),(0,a._)("p",D," -"+(0,o.zw)(Math.round(Z.cartData.total-Z.cartData.final_total)),1)])):(0,a.kq)("",!0),(0,a._)("p",E," 合計:NT$"+(0,o.zw)(Math.round(Z.cartData.final_total)),1)])])])]),(0,a._)("div",L,[I,(0,a.Wm)(Y,{ref:"form",class:"form py-5 p-sm-5 pb-sm-2 justify-content-center",onSubmit:H.submitorder},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",V,[M,(0,a.Wm)(K,{type:"email",class:(0,o.C_)(["form-control",{"is-invalid":e["email"]}]),name:"email",id:"email",placeholder:"請輸入 Email",rules:"email|required",modelValue:Z.orderform.user.email,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.orderform.user.email=e)},null,8,["class","modelValue"]),(0,a.Wm)(Q,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",j,[W,(0,a.Wm)(K,{type:"text",class:(0,o.C_)(["form-control",{"is-invalid":e["姓名"]}]),name:"姓名",id:"name",placeholder:"請輸入姓名",rules:"required",modelValue:Z.orderform.user.name,"onUpdate:modelValue":t[1]||(t[1]=e=>Z.orderform.user.name=e)},null,8,["class","modelValue"]),(0,a.Wm)(Q,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",z,[A,(0,a.Wm)(K,{type:"tel",class:(0,o.C_)(["form-control",{"is-invalid":e["手機"]}]),name:"手機",id:"tel",placeholder:"請輸入手機號碼:09XXXXXXXX",rules:{regex:/^09[0-9]{8}$/,required:!0},modelValue:Z.orderform.user.tel,"onUpdate:modelValue":t[2]||(t[2]=e=>Z.orderform.user.tel=e)},null,8,["class","modelValue"]),(0,a.Wm)(Q,{name:"手機",class:"invalid-feedback"})]),(0,a._)("div",q,[N,(0,a.Wm)(K,{type:"text",class:(0,o.C_)(["form-control",{"is-invalid":e["地址"]}]),name:"地址",id:"address",placeholder:"請輸入地址",rules:"required",modelValue:Z.orderform.user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>Z.orderform.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(Q,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",U,[S,(0,a.Wm)(K,{as:"textarea",id:"message",name:"留言",class:"form-control",cols:"30",rows:"10",modelValue:Z.orderform.user.message,"onUpdate:modelValue":t[4]||(t[4]=e=>Z.orderform.user.message=e)},null,8,["modelValue"])]),X])),_:1},8,["onSubmit"])])]),(0,a.Wm)(P,{ref:"ErrorToast",message:Z.toastMessage},null,8,["message"]),(0,a.Wm)(R,{ref:"Loading"},null,512)])],64)}var Z=s(2676),H=s(7257),K={name:"SendOrder",data(){return{cartData:{carts:[]},discountCoupon:{code:""},orderform:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:"",toastMessage:""}},components:{Loading:Z.Z,ErrorToast:H.Z},methods:{getCart(){this.$refs.Loading.ToggleLoading("on");const e="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/cart";this.$http(e).then((e=>{this.cartData=e.data.data,this.cartData.final_total===this.cartData.total?this.discountCoupon.code="":this.discountCoupon.code=this.cartData.carts[0].coupon.code,this.cartData.carts.length<=0&&(this.toastMessage="購物車為空，帶您回到購物頁面",this.$refs.ErrorToast.openToasts(),setTimeout((()=>{this.$router.push("/products")}),3e3))})).catch((e=>{alert(e.data.message)})),this.$refs.Loading.ToggleLoading("off")},submitorder(){const e="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/order",t=this.orderform;this.$http.post(e,{data:t}).then((e=>{this.orderId=e.data.orderId,this.$router.push({name:"paid",params:{id:`${this.orderId}`}}),this.$refs.form.resetForm()})).catch((()=>{this.toastMessage="購物車為空，帶您回到購物頁面",this.$refs.ErrorToast.openToasts()}))}},mounted(){this.getCart()}},Q=s(3744);const Y=(0,Q.Z)(K,[["render",O]]);var P=Y}}]);
//# sourceMappingURL=149.6619e60f.js.map