(self["webpackChunkreverie"]=self["webpackChunkreverie"]||[]).push([[967],{2776:function(e,t,s){
/*!
  * Bootstrap toast.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,i){e.exports=i(s(9286),s(3175),s(5695))})(0,(function(e,t,s){"use strict";const i=e=>e&&"object"===typeof e&&"default"in e?e:{default:e},n=i(e),o=i(t),a=i(s),r=e=>null===e||void 0===e?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),l=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let s=e.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),t=s&&"#"!==s?s.trim():null}return t},c=e=>{const t=l(e);return t?document.querySelector(t):null},u=e=>!(!e||"object"!==typeof e)&&("undefined"!==typeof e.jquery&&(e=e[0]),"undefined"!==typeof e.nodeType),d=(e,t,s)=>{Object.keys(s).forEach((i=>{const n=s[i],o=t[i],a=o&&u(o)?"element":r(o);if(!new RegExp(n).test(a))throw new TypeError(`${e.toUpperCase()}: Option "${i}" provided type "${a}" but expected type "${n}".`)}))},h=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||("undefined"!==typeof e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),m=e=>{e.offsetHeight},f=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},_=[],p=e=>{"loading"===document.readyState?(_.length||document.addEventListener("DOMContentLoaded",(()=>{_.forEach((e=>e()))})),_.push(e)):e()},b=e=>{p((()=>{const t=f();if(t){const s=e.NAME,i=t.fn[s];t.fn[s]=e.jQueryInterface,t.fn[s].Constructor=e,t.fn[s].noConflict=()=>(t.fn[s]=i,e.jQueryInterface)}}))},g=(e,t="hide")=>{const s=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;n.default.on(document,s,`[data-bs-dismiss="${i}"]`,(function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),h(this))return;const n=c(this)||this.closest(`.${i}`),o=e.getOrCreateInstance(n);o[t]()}))},y="toast",v="bs.toast",w=`.${v}`,T=`mouseover${w}`,$=`mouseout${w}`,E=`focusin${w}`,L=`focusout${w}`,I=`hide${w}`,x=`hidden${w}`,k=`show${w}`,C=`shown${w}`,M="fade",A="hide",D="show",S="showing",Z={animation:"boolean",autohide:"boolean",delay:"number"},j={animation:!0,autohide:!0,delay:5e3};class N extends a.default{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Z}static get Default(){return j}static get NAME(){return y}show(){const e=n.default.trigger(this._element,k);if(e.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(M);const t=()=>{this._element.classList.remove(S),n.default.trigger(this._element,C),this._maybeScheduleHide()};this._element.classList.remove(A),m(this._element),this._element.classList.add(D),this._element.classList.add(S),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(D))return;const e=n.default.trigger(this._element,I);if(e.defaultPrevented)return;const t=()=>{this._element.classList.add(A),this._element.classList.remove(S),this._element.classList.remove(D),n.default.trigger(this._element,x)};this._element.classList.add(S),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(D)&&this._element.classList.remove(D),super.dispose()}_getConfig(e){return e={...j,...o.default.getDataAttributes(this._element),..."object"===typeof e&&e?e:{}},d(y,e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t;break}if(t)return void this._clearTimeout();const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){n.default.on(this._element,T,(e=>this._onInteraction(e,!0))),n.default.on(this._element,$,(e=>this._onInteraction(e,!1))),n.default.on(this._element,E,(e=>this._onInteraction(e,!0))),n.default.on(this._element,L,(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=N.getOrCreateInstance(this,e);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}return g(N),b(N),N}))},8319:function(e,t,s){"use strict";var i=s(2776),n=s.n(i);t["Z"]={methods:{openToasts(){this.toast.show()},hideToasts(){this.toast.hide()}},mounted(){this.toast=new(n())(this.$refs.toast)}}},7257:function(e,t,s){"use strict";s.d(t,{Z:function(){return _}});var i=s(6252),n=s(3577);const o={class:"position-fixed toast-div"},a={class:"toast text-white bg-danger border-0",ref:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},r={class:"d-flex"},l={class:"toast-body"},c=(0,i._)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function u(e,t,s,u,d,h){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",a,[(0,i._)("div",r,[(0,i._)("div",l,(0,n.zw)(s.message),1),c])],512)])}var d=s(8319),h={props:["message"],mixins:[d.Z]},m=s(3744);const f=(0,m.Z)(h,[["render",u]]);var _=f},5793:function(e,t,s){"use strict";s.d(t,{Z:function(){return _}});var i=s(6252),n=s(3577);const o={class:"position-fixed toast-div"},a={class:"toast text-white bg-success border-0",ref:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},r={class:"d-flex"},l={class:"toast-body"},c=(0,i._)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function u(e,t,s,u,d,h){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",a,[(0,i._)("div",r,[(0,i._)("div",l,(0,n.zw)(s.message),1),c])],512)])}var d=s(8319),h={props:["message"],mixins:[d.Z]},m=s(3744);const f=(0,m.Z)(h,[["render",u]]);var _=f},5941:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var i=s(6252),n=s(9963);const o={class:"container-fluid full-screen vh-100 p-5"},a={class:"row form p-5"},r=(0,i._)("h2",{class:"fs-4 py-4 my-3"},"請先登入",-1),l={class:"mb-3"},c=(0,i._)("label",{for:"userEmail",class:"form-label"},"帳號",-1),u={class:"mb-3"},d=(0,i._)("label",{for:"userPassword",class:"form-label"},"密碼",-1),h={class:"mt-5 row row-cols-1 row-cols-sm-2 g-2"},m=(0,i._)("button",{class:"btn btn-primary col",type:"submit"},"登入",-1);function f(e,t,s,f,_,p){const b=(0,i.up)("SuccessToast"),g=(0,i.up)("ErrorToast"),y=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",o,[(0,i._)("div",a,[(0,i._)("form",{class:"col-6",onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>p.signIn&&p.signIn(...e)),["prevent"]))},[r,(0,i._)("div",l,[c,(0,i.wy)((0,i._)("input",{type:"email",name:"email",id:"userEmail",class:"form-control",placeholder:"請輸入電子信箱","onUpdate:modelValue":t[0]||(t[0]=e=>_.user.username=e),required:"",autofocus:""},null,512),[[n.nr,_.user.username]])]),(0,i._)("div",u,[d,(0,i.wy)((0,i._)("input",{type:"password",name:"password",id:"userPassword",class:"form-control",placeholder:"請輸入密碼","onUpdate:modelValue":t[1]||(t[1]=e=>_.user.password=e),required:""},null,512),[[n.nr,_.user.password]])]),(0,i._)("div",h,[m,(0,i._)("button",{class:"btn btn-secondary col btn-cancel",type:"button",onClick:t[2]||(t[2]=(...e)=>p.backIndex&&p.backIndex(...e))}," 取消 ")])],32)])]),(0,i.Wm)(b,{ref:"SuccessToast",message:_.toastMessage},null,8,["message"]),(0,i.Wm)(g,{ref:"ErrorToast",message:_.toastMessage},null,8,["message"]),(0,i.Wm)(y,{ref:"Loading"},null,512)],64)}var _=s(2676),p=s(5793),b=s(7257),g={name:"LoginView",data(){return{user:{},toastMessage:""}},components:{Loading:_.Z,ErrorToast:b.Z,SuccessToast:p.Z},methods:{signIn(){const e="https://vue3-course-api.hexschool.io/v2/admin/signin";this.$http.post(e,this.user).then((e=>{this.toastMessage=e.data.message,this.$refs.SuccessToast.openToasts();const{token:t,expired:s}=e.data;document.cookie=`hexToken=${t}; expires=${new Date(s)};`,setTimeout((()=>{this.$router.push("/adminProducts")}),1e3)})).catch((()=>{this.toastMessage="帳號或密碼有誤哦，請重新登入",this.$refs.ErrorToast.openToasts()}))},backIndex(){this.$router.push("/")}}},y=s(3744);const v=(0,y.Z)(g,[["render",f]]);var w=v}}]);
//# sourceMappingURL=967.c666f4af.js.map