"use strict";(self["webpackChunkreverie"]=self["webpackChunkreverie"]||[]).push([[497],{4639:function(t,e,a){a.d(e,{Z:function(){return P}});var s=a(6252),l=a(3577);const o={class:"modal fade",id:"delModal",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true",ref:"modal"},r={class:"modal-dialog modal-dialog-centered"},i={class:"modal-content"},d=(0,s._)("div",{class:"modal-header text-white border-0"},[(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),n={class:"modal-body text-center"},c=(0,s.Uk)(" 是否刪除"),u={class:"text-danger"},p=(0,s.Uk)("? "),m=(0,s._)("p",{class:"text-secondary text-sm"},"(刪除後將無法復原!!)",-1),g={class:"modal-footer"},b=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function _(t,e,a,_,h,y){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[(0,s._)("div",i,[d,(0,s._)("div",n,[(0,s._)("p",null,[c,(0,s._)("strong",u,(0,l.zw)(a.title),1),p]),m]),(0,s._)("div",g,[b,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=t=>y.delItem())}," 確定刪除 ")])])])],512)}var h=a(1339),y={props:["title"],mixins:[h.Z],methods:{delItem(){this.$emit("del-item")}}},v=a(3744);const f=(0,v.Z)(y,[["render",_]]);var P=f},3981:function(t,e,a){a.d(e,{Z:function(){return y}});var s=a(6252),l=a(3577),o=a(9963);const r={"aria-label":"Page navigation example"},i={class:"pagination justify-content-center"},d=(0,s._)("span",{"aria-hidden":"true"},"«",-1),n=[d],c={key:0,class:"page-link"},u=["onClick"],p=(0,s._)("span",{"aria-hidden":"true"},"»",-1),m=[p];function g(t,e,a,d,p,g){return(0,s.wg)(),(0,s.iD)("nav",r,[(0,s._)("ul",i,[(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:1===a.pages.current_page}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((t=>g.emitPage(a.pages.current_page-1)),["prevent"]))},n)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.pages.total_pages,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{class:(0,l.C_)(["page-item",{active:t===a.pages.current_page}]),key:e},[t===a.pages.current_page?((0,s.wg)(),(0,s.iD)("span",c,(0,l.zw)(t),1)):((0,s.wg)(),(0,s.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,o.iM)((e=>g.emitPage(t)),["prevent"])},(0,l.zw)(t),9,u))],2)))),128)),(0,s._)("li",{class:(0,l.C_)(["page-item",{disabled:a.pages.current_page===a.pages.total_pages}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((t=>g.emitPage(a.pages.current_page+1)),["prevent"]))},m)],2)])])}var b={props:["pages"],methods:{emitPage(t){this.$emit("emit-pages",t)}}},_=a(3744);const h=(0,_.Z)(b,[["render",g]]);var y=h},4265:function(t,e,a){a.r(e),a.d(e,{default:function(){return wt}});var s=a(6252),l=a(3577);const o=(0,s._)("div",{class:"dash-title d-flex flex-column mt-3"},[(0,s._)("span",{class:"text-secondary position-relative deco-line"},"Products List"),(0,s._)("h2",{class:"mb-3 fw-bold"},"產品列表")],-1),r={class:"container"},i={class:"text-end mt-4"},d={class:"table mt-4"},n=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"120"},"分類"),(0,s._)("th",null,"產品名稱"),(0,s._)("th",{width:"120"},"原價"),(0,s._)("th",{width:"120"},"售價"),(0,s._)("th",{width:"100"},"是否啟用"),(0,s._)("th",{width:"120"},"編輯")])],-1),c={class:"text-end"},u={class:"text-end"},p={key:0,class:"text-success"},m={key:1},g={class:"btn-group"},b=["onClick"],_=["onClick"];function h(t,e,a,h,y,v){const f=(0,s.up)("ProductsModal"),P=(0,s.up)("DelModal"),w=(0,s.up)("Pagination"),k=(0,s.up)("Loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[o,(0,s._)("section",null,[(0,s._)("div",r,[(0,s._)("div",i,[(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=t=>v.openProductModal("create"))}," 建立新的產品 ")]),(0,s._)("table",d,[n,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(y.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,(0,l.zw)(t.category),1),(0,s._)("td",null,(0,l.zw)(t.title),1),(0,s._)("td",c,(0,l.zw)(t.origin_price),1),(0,s._)("td",u,(0,l.zw)(t.price),1),(0,s._)("td",null,[t.is_enabled?((0,s.wg)(),(0,s.iD)("span",p,"啟用")):((0,s.wg)(),(0,s.iD)("span",m,"未啟用"))]),(0,s._)("td",null,[(0,s._)("div",g,[(0,s._)("button",{type:"button",class:"btn btn-sm btn-primary",onClick:e=>v.openProductModal("edit",t)}," 編輯 ",8,b),(0,s._)("button",{type:"button",class:"btn btn-sm btn-info",onClick:e=>v.openProductModal("delete",t)}," 刪除 ",8,_)])])])))),128))])])]),(0,s.Wm)(f,{"temporary-products":y.tempProducts,status:y.status,onGetData:v.getProducts,ref:"ProductsModal"},null,8,["temporary-products","status","onGetData"]),(0,s.Wm)(P,{ref:"DelModal",onDelItem:v.deleteProduct,title:y.tempProducts.title},null,8,["onDelItem","title"])]),(0,s.Wm)(w,{pages:y.pagination,onEmitPages:v.getProducts},null,8,["pages","onEmitPages"]),(0,s.Wm)(k,{ref:"Loading"},null,512)],64)}var y=a(3981),v=a(9963);const f={class:"modal fade",id:"productModal",tabindex:"-1","aria-labelledby":"ProductModalLabel","aria-hidden":"true",ref:"modal"},P={class:"modal-dialog modal-xl modal-dialog-centered"},w={class:"modal-content"},k={class:"modal-header"},x={class:"modal-title",id:"productModalLabel"},U={key:0},D={key:1},M=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),C={class:"modal-body"},$={class:"row"},L={class:"col-sm-4"},V={class:"mb-3"},Z=(0,s._)("label",{for:"imageUrl",class:"form-label"},"主圖片",-1),z=["src"],I=(0,s._)("h3",{class:"mb-3"},"多圖新增",-1),H={key:0},W={class:"mb-3"},Y=(0,s._)("label",{for:"imagesUrl",class:"form-label"},"圖片網址",-1),K=["onUpdate:modelValue"],A=["src"],E={key:0},G={key:1},T={key:1},j={class:"col-sm-8"},q={class:"mb-3"},N=(0,s._)("label",{for:"title",class:"form-label"},"產品名稱",-1),B={class:"row"},F={class:"col-md-6"},J=(0,s._)("label",{for:"category",class:"form-label"},"分類",-1),O={class:"col-md-6"},Q=(0,s._)("label",{for:"unit",class:"form-label"},"單位",-1),R={class:"row"},S={class:"col-md-6"},X=(0,s._)("label",{for:"origin_price",class:"form-label"},"原價",-1),tt={class:"col-md-6"},et=(0,s._)("label",{for:"price",class:"form-label"},"售價",-1),at=(0,s._)("hr",null,null,-1),st={class:"mb-3"},lt=(0,s._)("label",{for:"description",class:"form-label"},"產品描述",-1),ot={class:"mb-3"},rt=(0,s._)("label",{for:"content",class:"form-label"},"說明內容",-1),it={class:"mb-3"},dt={class:"form-check"},nt=(0,s._)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),ct={class:"modal-footer"},ut=(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function pt(t,e,a,l,o,r){return(0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",P,[(0,s._)("div",w,[(0,s._)("div",k,[(0,s._)("h5",x,["create"===a.status?((0,s.wg)(),(0,s.iD)("span",U,"新增產品")):"edit"===a.status?((0,s.wg)(),(0,s.iD)("span",D,"編輯產品")):(0,s.kq)("",!0)]),M]),(0,s._)("div",C,[(0,s._)("div",$,[(0,s._)("div",L,[(0,s._)("div",V,[Z,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"imageUrl","onUpdate:modelValue":e[0]||(e[0]=e=>t.temporaryProducts.imageUrl=e),placeholder:"請輸入圖片連結"},null,512),[[v.nr,t.temporaryProducts.imageUrl]]),(0,s._)("img",{src:t.temporaryProducts.imageUrl,alt:"",class:"img-fluid"},null,8,z)]),I,Array.isArray(t.temporaryProducts.imagesUrl)?((0,s.wg)(),(0,s.iD)("div",H,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.temporaryProducts.imagesUrl,((e,a)=>((0,s.wg)(),(0,s.iD)("div",{class:"mb-1",key:a},[(0,s._)("div",W,[Y,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e=>t.temporaryProducts.imagesUrl[a]=e,type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,K),[[v.nr,t.temporaryProducts.imagesUrl[a]]])]),(0,s._)("img",{class:"img-fluid",src:e},null,8,A)])))),128)),!t.temporaryProducts.imagesUrl.length||t.temporaryProducts.imagesUrl[t.temporaryProducts.imagesUrl.length-1]?((0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[1]||(e[1]=e=>t.temporaryProducts.imagesUrl.push(""))}," 新增圖片 ")])):((0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=e=>t.temporaryProducts.imagesUrl.pop())}," 刪除圖片 ")]))])):((0,s.wg)(),(0,s.iD)("div",T,[(0,s._)("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=(...t)=>r.createImages&&r.createImages(...t))}," 新增圖片 ")]))]),(0,s._)("div",j,[(0,s._)("div",q,[N,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[4]||(e[4]=e=>t.temporaryProducts.title=e),placeholder:"請輸入產品名稱"},null,512),[[v.nr,t.temporaryProducts.title]])]),(0,s._)("div",B,[(0,s._)("div",F,[J,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":e[5]||(e[5]=e=>t.temporaryProducts.category=e),placeholder:"請輸入產品分類"},null,512),[[v.nr,t.temporaryProducts.category]])]),(0,s._)("div",O,[Q,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":e[6]||(e[6]=e=>t.temporaryProducts.unit=e),placeholder:"請輸入產品單位"},null,512),[[v.nr,t.temporaryProducts.unit]])])]),(0,s._)("div",R,[(0,s._)("div",S,[X,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",id:"origin_price",min:"0","onUpdate:modelValue":e[7]||(e[7]=e=>t.temporaryProducts.origin_price=e),placeholder:"請輸入原價"},null,512),[[v.nr,t.temporaryProducts.origin_price,void 0,{number:!0}]])]),(0,s._)("div",tt,[et,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",id:"price",min:"0","onUpdate:modelValue":e[8]||(e[8]=e=>t.temporaryProducts.price=e),placeholder:"請輸入售價"},null,512),[[v.nr,t.temporaryProducts.price,void 0,{number:!0}]])])]),at,(0,s._)("div",st,[lt,(0,s.wy)((0,s._)("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=e=>t.temporaryProducts.description=e),placeholder:"請輸入產品描述"},"\r\n                ",512),[[v.nr,t.temporaryProducts.description]])]),(0,s._)("div",ot,[rt,(0,s.wy)((0,s._)("textarea",{id:"content",type:"text",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=e=>t.temporaryProducts.content=e),placeholder:"請輸入說明內容"},"\r\n                ",512),[[v.nr,t.temporaryProducts.content]])]),(0,s._)("div",it,[(0,s._)("div",dt,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"is_enabled","onUpdate:modelValue":e[11]||(e[11]=e=>t.temporaryProducts.is_enabled=e),"true-value":1,"false-value":0},null,512),[[v.e8,t.temporaryProducts.is_enabled]]),nt])])])])]),(0,s._)("div",ct,[ut,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=t=>r.saveProduct())}," 確定 ")])])])],512)}var mt=a(1339),gt={props:["temporary-products","status"],mixins:[mt.Z],methods:{saveProduct(){let t="",e="";"create"===this.status?(t="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/admin/product",e="post"):"edit"===this.status&&(t=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/admin/product/${this.temporaryProducts.id}`,e="put"),this.$http[e](t,{data:this.temporaryProducts}).then((t=>{alert(t.data.message),this.$emit("get-data"),this.modal.hide()})).catch((t=>{alert(t.response.data.message)}))},createImages(){this.temporaryProducts.imagesUrl=[],this.temporaryProducts.imagesUrl.push("")}}},bt=a(3744);const _t=(0,bt.Z)(gt,[["render",pt]]);var ht=_t,yt=a(4639),vt=a(2676),ft={data(){return{products:[],tempProducts:{imagesUrl:[]},status:"",pagination:{}}},components:{Pagination:y.Z,ProductsModal:ht,DelModal:yt.Z,Loading:vt.Z},methods:{getProducts(t=1){this.$refs.Loading.ToggleLoading("on");const e=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/admin/products?page=${t}`;this.$http.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination})).catch((t=>{alert(t.data.message)})),this.$refs.Loading.ToggleLoading("off")},openProductModal(t,e){const a=this.$refs.ProductsModal,s=this.$refs.DelModal;e?"edit"===t?(this.tempProducts={...e},a.openModal(),this.status="edit"):"delete"===t&&(this.tempProducts={...e},s.openModal(),this.status="delete"):(this.tempProducts={imagesUrl:[]},a.openModal(),this.status="create")},deleteProduct(){const t=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/admin/product/${this.tempProducts.id}`;this.$http.delete(t,{data:this.tempProducts}).then((t=>{this.getProducts(),alert(t.data.message)})).catch((t=>{alert(t.data.message)})),this.$refs.DelModal.hideModal()}},mounted(){this.getProducts()}};const Pt=(0,bt.Z)(ft,[["render",h]]);var wt=Pt}}]);
//# sourceMappingURL=497.92a6fa5a.js.map