(self["webpackChunkreverie"]=self["webpackChunkreverie"]||[]).push([[136],{2776:function(t,e,s){
/*!
  * Bootstrap toast.js v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,i){t.exports=i(s(9286),s(3175),s(5695))})(0,(function(t,e,s){"use strict";const i=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},a=i(t),o=i(e),n=i(s),l=t=>null===t||void 0===t?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),c=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let s=t.getAttribute("href");if(!s||!s.includes("#")&&!s.startsWith("."))return null;s.includes("#")&&!s.startsWith("#")&&(s=`#${s.split("#")[1]}`),e=s&&"#"!==s?s.trim():null}return e},r=t=>{const e=c(t);return e?document.querySelector(e):null},d=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),u=(t,e,s)=>{Object.keys(s).forEach((i=>{const a=s[i],o=e[i],n=o&&d(o)?"element":l(o);if(!new RegExp(a).test(n))throw new TypeError(`${t.toUpperCase()}: Option "${i}" provided type "${n}" but expected type "${a}".`)}))},h=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),p=t=>{t.offsetHeight},m=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},f=[],g=t=>{"loading"===document.readyState?(f.length||document.addEventListener("DOMContentLoaded",(()=>{f.forEach((t=>t()))})),f.push(t)):t()},b=t=>{g((()=>{const e=m();if(e){const s=t.NAME,i=e.fn[s];e.fn[s]=t.jQueryInterface,e.fn[s].Constructor=t,e.fn[s].noConflict=()=>(e.fn[s]=i,t.jQueryInterface)}}))},_=(t,e="hide")=>{const s=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;a.default.on(document,s,`[data-bs-dismiss="${i}"]`,(function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),h(this))return;const a=r(this)||this.closest(`.${i}`),o=t.getOrCreateInstance(a);o[e]()}))},v="toast",y="bs.toast",w=`.${y}`,x=`mouseover${w}`,T=`mouseout${w}`,C=`focusin${w}`,D=`focusout${w}`,k=`hide${w}`,$=`hidden${w}`,I=`show${w}`,L=`shown${w}`,M="fade",E="hide",z="show",Z="showing",N={animation:"boolean",autohide:"boolean",delay:"number"},j={animation:!0,autohide:!0,delay:5e3};class q extends n.default{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return N}static get Default(){return j}static get NAME(){return v}show(){const t=a.default.trigger(this._element,I);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(M);const e=()=>{this._element.classList.remove(Z),a.default.trigger(this._element,L),this._maybeScheduleHide()};this._element.classList.remove(E),p(this._element),this._element.classList.add(z),this._element.classList.add(Z),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(z))return;const t=a.default.trigger(this._element,k);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(E),this._element.classList.remove(Z),this._element.classList.remove(z),a.default.trigger(this._element,$)};this._element.classList.add(Z),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(z)&&this._element.classList.remove(z),super.dispose()}_getConfig(t){return t={...j,...o.default.getDataAttributes(this._element),..."object"===typeof t&&t?t:{}},u(v,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){a.default.on(this._element,x,(t=>this._onInteraction(t,!0))),a.default.on(this._element,T,(t=>this._onInteraction(t,!1))),a.default.on(this._element,C,(t=>this._onInteraction(t,!0))),a.default.on(this._element,D,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return _(q),b(q),q}))},1530:function(t,e,s){"use strict";function i(t){return{all:t=t||new Map,on:function(e,s){var i=t.get(e);i?i.push(s):t.set(e,[s])},off:function(e,s){var i=t.get(e);i&&(s?i.splice(i.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var i=t.get(e);i&&i.slice().map((function(t){t(s)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,s)}))}}}s.d(e,{Z:function(){return o}});const a=i();var o=a},8319:function(t,e,s){"use strict";var i=s(2776),a=s.n(i);e["Z"]={methods:{openToasts(){this.toast.show()},hideToasts(){this.toast.hide()}},mounted(){this.toast=new(a())(this.$refs.toast)}}},7257:function(t,e,s){"use strict";s.d(e,{Z:function(){return f}});var i=s(6252),a=s(3577);const o={class:"position-fixed toast-div"},n={class:"toast text-white bg-danger border-0",ref:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},l={class:"d-flex"},c={class:"toast-body"},r=(0,i._)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function d(t,e,s,d,u,h){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",n,[(0,i._)("div",l,[(0,i._)("div",c,(0,a.zw)(s.message),1),r])],512)])}var u=s(8319),h={props:["message"],mixins:[u.Z]},p=s(3744);const m=(0,p.Z)(h,[["render",d]]);var f=m},4639:function(t,e,s){"use strict";s.d(e,{Z:function(){return w}});var i=s(6252),a=s(3577);const o={class:"modal fade",id:"delModal",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true",ref:"modal"},n={class:"modal-dialog modal-dialog-centered"},l={class:"modal-content"},c=(0,i._)("div",{class:"modal-header text-white border-0"},[(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),r={class:"modal-body text-center"},d=(0,i.Uk)(" 是否刪除"),u={class:"text-danger"},h=(0,i.Uk)("? "),p=(0,i._)("p",{class:"text-secondary text-sm"},"(刪除後將無法復原!!)",-1),m={class:"modal-footer"},f=(0,i._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function g(t,e,s,g,b,_){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",n,[(0,i._)("div",l,[c,(0,i._)("div",r,[(0,i._)("p",null,[d,(0,i._)("strong",u,(0,a.zw)(s.title),1),h]),p]),(0,i._)("div",m,[f,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=t=>_.delItem())}," 確定刪除 ")])])])],512)}var b=s(1339),_={props:["title"],mixins:[b.Z],methods:{delItem(){this.$emit("del-item")}}},v=s(3744);const y=(0,v.Z)(_,[["render",g]]);var w=y},5793:function(t,e,s){"use strict";s.d(e,{Z:function(){return f}});var i=s(6252),a=s(3577);const o={class:"position-fixed toast-div"},n={class:"toast text-white bg-success border-0",ref:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},l={class:"d-flex"},c={class:"toast-body"},r=(0,i._)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function d(t,e,s,d,u,h){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",n,[(0,i._)("div",l,[(0,i._)("div",c,(0,a.zw)(s.message),1),r])],512)])}var u=s(8319),h={props:["message"],mixins:[u.Z]},p=s(3744);const m=(0,p.Z)(h,[["render",d]]);var f=m},5731:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return mt}});var i=s(6252),a=s(3577),o=s(9963);const n=(0,i._)("section",{class:"section-top mb-5"},[(0,i._)("div",{class:"bg-top banner-cart pic"},[(0,i._)("div",{class:"text-center w-100 h-100 mask z-index-3 position-relative"},[(0,i._)("div",{class:"position-absolute top-50 start-50 translate-middle"},[(0,i._)("h2",null,"購物車"),(0,i._)("p",null,"My Cart")])])])],-1),l={class:"container"},c=(0,i.uE)('<section class="cart-progress my-5"><ol class="progress-list container row g-0"><li class="col-4 active"><span class="step mb-2 text-white">1</span> 購物車 </li><li class="col-4"><span class="step mb-2 text-white">2</span>填寫資料 </li><li class="col-4"><span class="step mb-2 text-white">3</span>訂單完成 </li></ol></section><div class="bg-primary text-white p-2"><h3 class="m-0 text-center">購物車</h3></div>',2),r={key:0,class:"cart px-2 pb-2 px-sm-5 pt-sm-5 pb-sm-2 bg-white"},d={class:"table align-middle"},u=(0,i.uE)('<div class="thead row"><div class="col-9 col-md-4">商品資料</div><div class="col-12 col-md-2">單件價格</div><div class="col-6 col-md-3">數量</div><div class="col-6 col-md-3">小計</div><hr></div>',1),h={class:"col-5 col-md-2"},p={class:"col-7 col-md-2"},m={class:"d-inline-block col my-auto text-center"},f={class:"col-12 col-md-2 order-md-2 order-3"},g={key:0},b={class:"h5 d-inline d-lg-block"},_={key:1},v={class:"h5 d-inline d-lg-block text-info fw-bold"},y={class:"text-decoration-line-through fw-light"},w={class:"col-8 col-md-3 order-md-3 order-4 z-index-3"},x={class:"input-group input-group-sm"},T={class:"input-group mb-3"},C=["onUpdate:modelValue","onChange","disabled"],D=["value"],k={class:"input-group-text",id:"basic-addon2"},$={class:"col-4 col-md-3 order-md-4 order-4 text-center"},I={key:0,class:"d-flex align-items-center"},L=(0,i._)("span",{class:"spinner-border me-2 d-none d-sm-block",role:"status","aria-hidden":"true"},null,-1),M=(0,i._)("span",null,"更新中...",-1),E=[L,M],z={key:1},Z={class:"text-end del-item"},N=["onClick","disabled"],j=(0,i._)("i",{class:"bi bi-x-square fs-5 text-info"},null,-1),q=[j],S={class:"my-3"},A={class:"d-flex flex-column align-items-end"},O={key:0,class:"row g-3"},U={class:"col-auto"},H=(0,i._)("label",{for:"coupon",class:"visually-hidden"},"請輸入優惠券代碼",-1),W={class:"col-auto"},K={key:1,class:"text-success text-end"},V={key:0,class:"d-inline bg-success text-white p-2"},Q={class:"mt-2"},Y={class:"d-flex justify-content-between align-items-center mt-5"},P={class:"fw-bold fs-4"},R=(0,i.Uk)(" 合計:NT$ "),B={key:0},F={key:1},G={key:1,class:"cart px-2 p-sm-3"},J={class:"d-flex flex-column align-items-center p-3"},X=(0,i._)("i",{class:"bi bi-cart3"},null,-1),tt=(0,i._)("p",null,"你的購物車是空的",-1),et=(0,i._)("p",null,"記得加入商品到你的購物車",-1),st=(0,i.Uk)("繼續購物 "),it={key:2,class:"d-flex justify-content-center my-5"},at=(0,i.uE)('<div class="section-service container"><div class="services px-3 py-5"><ul class="list-unstyled row row-cols-1 row-cols-md-2 row-cols-lg-4"><li class="col service"><i class="bi bi-bag"></i><h4 class="mt-3 fw-bold">訂單成立</h4><p> 確認訂單後約七個工作天(不含例假日)送達，訂單成立後會有專人致電訂購人確認。 </p></li><li class="col service"><i class="bi bi-exclamation-square"></i><h4 class="mt-3 fw-bold">注意事項</h4><p>盒內放有乾冰，請小心處理，否則可能引起危險。</p></li><li class="col service"><i class="bi bi-box2"></i><h4 class="mt-3 fw-bold">取消訂單</h4><p>訂購商品後，在尚未出貨之前，您仍可以申請取消訂單</p></li><li class="col service"><i class="bi bi-shop"></i><h4 class="mt-3 fw-bold">食品鑑賞期</h4><p>本商店商品無7天鑑賞期，食品貨物提領後恕不提供退換貨服務</p></li></ul></div></div>',1);function ot(t,e,s,L,M,j){const ot=(0,i.up)("router-link"),nt=(0,i.up)("SuccessToast"),lt=(0,i.up)("ErrorToast"),ct=(0,i.up)("DelModal"),rt=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n,(0,i._)("main",l,[c,M.cartData.carts.length>0?((0,i.wg)(),(0,i.iD)("section",r,[(0,i._)("table",d,[u,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(M.cartData.carts,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"row p-3 align-items-center position-relative",key:t.id},[(0,i._)("div",h,[(0,i._)("div",{class:"pic ratio ratio-1x1",style:(0,a.j5)({backgroundImage:`url(${t.product.imageUrl})`})},null,4)]),(0,i._)("div",p,[(0,i._)("p",m,(0,a.zw)(t.product.title),1)]),(0,i._)("div",f,[t.product.origin_price===t.product.price?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("p",b,"NT$"+(0,a.zw)(t.product.price),1)])):((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("p",v," NT$"+(0,a.zw)(t.product.price)+"  ",1),(0,i._)("small",y,"NT$"+(0,a.zw)(t.product.origin_price),1)]))]),(0,i._)("div",w,[(0,i._)("div",x,[(0,i._)("div",T,[(0,i.wy)((0,i._)("select",{class:"form-select","onUpdate:modelValue":e=>t.qty=e,onChange:e=>j.updateCartItem(t),disabled:M.isLoadingItem===t.id},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(10,(e=>(0,i._)("option",{value:e,key:`${e}_${t.id}`},(0,a.zw)(e),9,D))),64))],40,C),[[o.bM,t.qty]]),(0,i._)("span",k,(0,a.zw)(t.product.unit),1)])])]),(0,i._)("div",$,[M.isLoadingItem===t.id?((0,i.wg)(),(0,i.iD)("div",I,E)):((0,i.wg)(),(0,i.iD)("p",z,(0,a.zw)(t.total)+"元",1))]),(0,i._)("div",Z,[(0,i._)("button",{type:"button",class:"cancel",onClick:e=>j.openDelModal(t),disabled:M.isLoadingItem===t.id},q,8,N)])])))),128))]),(0,i._)("div",S,[(0,i._)("div",A,[(0,i._)("p",null,"小計:NT$"+(0,a.zw)(M.cartData.total),1),M.discountCoupon.code?((0,i.wg)(),(0,i.iD)("div",K,[M.discountCoupon.code?((0,i.wg)(),(0,i.iD)("p",V," 已套用優惠券:"+(0,a.zw)(M.discountCoupon.code),1)):(0,i.kq)("",!0),(0,i._)("p",Q," -"+(0,a.zw)(Math.round(M.cartData.total-M.cartData.final_total)),1)])):((0,i.wg)(),(0,i.iD)("form",O,[(0,i._)("div",U,[H,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"coupon",placeholder:"請輸入優惠券代碼","onUpdate:modelValue":e[0]||(e[0]=t=>M.code=t)},null,512),[[o.nr,M.code]])]),(0,i._)("div",W,[(0,i._)("button",{type:"submit",class:"btn btn-primary mb-3",onClick:e[1]||(e[1]=(...t)=>j.discount&&j.discount(...t))}," 套用 ")])]))]),(0,i._)("div",Y,[(0,i._)("button",{type:"button",class:"btn btn-delete-all",onClick:e[2]||(e[2]=t=>j.openDelModal(0))}," 清空購物車 "),(0,i._)("p",P,[R,M.discountCoupon?((0,i.wg)(),(0,i.iD)("span",B,(0,a.zw)(Math.round(M.cartData.final_total)),1)):((0,i.wg)(),(0,i.iD)("span",F,(0,a.zw)(M.cartData.total),1))])])])])):((0,i.wg)(),(0,i.iD)("section",G,[(0,i._)("div",J,[X,tt,et,(0,i.Wm)(ot,{to:"/products",class:"btn btn-primary"},{default:(0,i.w5)((()=>[st])),_:1})])])),M.cartData.carts.length>0?((0,i.wg)(),(0,i.iD)("div",it,[(0,i._)("button",{type:"button",class:"btn btn-primary fs-4",onClick:e[3]||(e[3]=(...t)=>j.goToSendOrder&&j.goToSendOrder(...t))}," 下一步 ")])):(0,i.kq)("",!0)]),at,(0,i.Wm)(nt,{ref:"SuccessToast",message:M.toastMessage},null,8,["message"]),(0,i.Wm)(lt,{ref:"ErrorToast",message:M.toastMessage},null,8,["message"]),(0,i.Wm)(ct,{ref:"DelModal",onDelItem:j.delCartItem,title:M.delteTitle},null,8,["onDelItem","title"]),(0,i.Wm)(rt,{ref:"Loading"},null,512)],64)}var nt=s(1530),lt=s(2676),ct=s(5793),rt=s(7257),dt=s(4639),ut={name:"CartView",data(){return{cartData:{carts:[]},code:"",discountCoupon:{final_total:"",message:"",code:""},isLoadingItem:"",toastMessage:"",delteCartId:{},delteTitle:""}},components:{Loading:lt.Z,SuccessToast:ct.Z,ErrorToast:rt.Z,DelModal:dt.Z},methods:{goToSendOrder(){this.cartData.carts.length<=0?alert("請加入商品"):this.$router.push("/sendorder")},getCart(){this.$refs.Loading.ToggleLoading("on");const t="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/cart";this.$http(t).then((t=>{this.cartData=t.data.data,this.cartData.final_total===this.cartData.total?this.discountCoupon.code="":this.discountCoupon.code=this.cartData.carts[0].coupon.code})).catch((()=>{this.toastMessage="發生錯誤，請重新整理",this.$refs.ErrorToast.openToasts()})),this.$refs.Loading.ToggleLoading("off")},updateCartItem(t){const e=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/cart/${t.id}`,s={product_id:t.id,qty:t.qty};this.isLoadingItem=t.id,this.$http.put(e,{data:s}).then((()=>{this.toastMessage="購物車更新成功",this.$refs.SuccessToast.openToasts(),this.getCart()})).catch((()=>{this.toastMessage="發生錯誤，請重新整理",this.$refs.ErrorToast.openToasts()})),setTimeout((()=>{this.isLoadingItem=""}),1e3)},openDelModal(t){0!==t?(this.delteCartId=t.id,this.delteTitle=t.product.title):(this.delteCartId=t.id,this.delteTitle="整個購物車");const e=this.$refs.DelModal;e.openModal()},delCartItem(){let t=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/cart/${this.delteCartId}`;this.isLoadingItem=this.delteCartId,this.delteCartId||(t="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/carts",this.$refs.Loading.ToggleLoading("on")),this.$http.delete(t).then((()=>{this.getCart(),nt.Z.emit("get-cart")})).catch((t=>{this.toastMessage=t.data.message,this.$refs.ErrorToast.openToasts()})),this.$refs.DelModal.hideModal(),setTimeout((()=>{this.isLoadingItem=""}),1e3),this.$refs.Loading.ToggleLoading("off")},discount(){const t="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/coupon",e={code:this.code};this.$http.post(t,{data:e}).then((t=>{this.discountCoupon.final_total=t.data.data.final_total,this.discountCoupon.message=t.data.message,this.getCart()})).catch((()=>{this.toastMessage="您的優惠券無效哦。請重新檢查代碼是否填寫有誤及英文字母大小寫是否符合。",this.$refs.ErrorToast.openToasts()}))}},mounted(){this.getCart()}},ht=s(3744);const pt=(0,ht.Z)(ut,[["render",ot]]);var mt=pt}}]);
//# sourceMappingURL=136.056d5253.js.map