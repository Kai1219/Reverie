"use strict";(self["webpackChunkreverie"]=self["webpackChunkreverie"]||[]).push([[958],{4639:function(t,e,s){s.d(e,{Z:function(){return w}});var o=s(6252),a=s(3577);const i={class:"modal fade",id:"delModal",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true",ref:"modal"},l={class:"modal-dialog modal-dialog-centered"},d={class:"modal-content"},r=(0,o._)("div",{class:"modal-header text-white border-0"},[(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),n={class:"modal-body text-center"},c=(0,o.Uk)(" 是否刪除"),u={class:"text-danger"},m=(0,o.Uk)("? "),p=(0,o._)("p",{class:"text-secondary text-sm"},"(刪除後將無法復原!!)",-1),h={class:"modal-footer"},g=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function f(t,e,s,f,b,v){return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",l,[(0,o._)("div",d,[r,(0,o._)("div",n,[(0,o._)("p",null,[c,(0,o._)("strong",u,(0,a.zw)(s.title),1),m]),p]),(0,o._)("div",h,[g,(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=t=>v.delItem())}," 確定刪除 ")])])])],512)}var b=s(1339),v={props:["title"],mixins:[b.Z],methods:{delItem(){this.$emit("del-item")}}},_=s(3744);const x=(0,_.Z)(v,[["render",f]]);var w=x},6635:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var o=s(6252),a=s(3577);const i=(0,o._)("section",{class:"section-top mb-5"},[(0,o._)("div",{class:"bg-top banner-favorite pic"},[(0,o._)("div",{class:"text-center w-100 h-100 mask z-index-3 position-relative"},[(0,o._)("div",{class:"position-absolute top-50 start-50 translate-middle"},[(0,o._)("h2",null,"願望清單"),(0,o._)("p",null,"My Whishlist")])])])],-1),l={class:"container mb-5"},d=(0,o._)("section",{class:"bg-primary text-white p-2"},[(0,o._)("h1",{class:"m-0"},"收藏清單")],-1),r={key:0,class:"favorite px-2 pb-2 px-sm-5 pt-sm-5 pb-sm-2 border"},n={class:"table align-middle"},c=(0,o._)("tr",{class:"thead row px-lg-3 justify-content-center"},[(0,o._)("td",{class:"col-4 text-start"},"商品資料"),(0,o._)("td",{class:"col-4 col-lg-2"},"價格"),(0,o._)("td",{class:"col-3"},"加入購物車"),(0,o._)("td",{class:"col-1"},"刪除")],-1),u=(0,o._)("hr",null,null,-1),m={class:"col-5 col-md-2"},p={class:"col-6 col-md-2"},h={class:"d-inline-block col my-auto text-center"},g={class:"col-6 col-md-4 col-lg-2 order-md-2 order-3"},f={key:0},b={class:"h5 d-inline d-lg-block"},v={key:1},_={class:"h5 d-inline d-lg-block text-info fw-bold"},x={class:"text-decoration-line-through fw-light"},w={class:"col-6 col-md-3 order-md-3 order-4 z-index-3 px-lg-5"},k=["onClick","disabled"],I={key:0,class:"mx-auto d-flex align-items-center justify-content-center text-white"},y=(0,o._)("span",{class:"spinner-border me-2 d-none d-sm-block",role:"status","aria-hidden":"true"},null,-1),T=(0,o._)("span",null,"更新中...",-1),D=[y,T],M={key:1},L={class:"col-12 col-md-1 order-md-4 order-4 text-center"},$=["onClick","disabled"],C=(0,o._)("i",{class:"bi bi-trash-fill fs-5"},null,-1),Z=[C],S={class:"d-flex justify-content-end p-3"},W=(0,o.Uk)("繼續購物 "),z={key:1,class:"favorite px-2 p-sm-3"},E={class:"d-flex flex-column align-items-center p-3"},j=(0,o._)("i",{class:"bi bi-emoji-frown"},null,-1),N=(0,o._)("p",null,"目前沒有收藏任何商品",-1),U=(0,o._)("p",null,"去商店逛逛吧!",-1),F=(0,o.Uk)("繼續購物 ");function H(t,e,s,y,T,C){const H=(0,o.up)("router-link"),J=(0,o.up)("ServiceList"),O=(0,o.up)("SuccessToast"),P=(0,o.up)("ErrorToast"),Y=(0,o.up)("DelModal"),q=(0,o.up)("Loading");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,(0,o._)("main",l,[d,T.products.length>0?((0,o.wg)(),(0,o.iD)("section",r,[(0,o._)("table",n,[c,u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(T.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{class:"row p-3 p-sm-1 align-items-center position-relative justify-content-center",key:t.id},[(0,o._)("td",m,[(0,o._)("div",{class:"pic ratio ratio-1x1",style:(0,a.j5)({backgroundImage:`url(${t.imageUrl})`})},null,4)]),(0,o._)("td",p,[(0,o._)("p",h,(0,a.zw)(t.title),1)]),(0,o._)("td",g,[t.origin_price===t.price?((0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("p",b,"NT$"+(0,a.zw)(t.price),1)])):((0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("p",_," NT$"+(0,a.zw)(t.price)+"  ",1),(0,o._)("small",x,"NT$"+(0,a.zw)(t.origin_price),1)]))]),(0,o._)("td",w,[(0,o._)("button",{type:"button",class:"btn btn-info w-100",onClick:e=>C.addToCart(t.id),disabled:T.isLoadingItem===t.id},[T.isLoadingItem===t.id?((0,o.wg)(),(0,o.iD)("div",I,D)):((0,o.wg)(),(0,o.iD)("span",M,"加入購物車"))],8,k)]),(0,o._)("td",L,[(0,o._)("button",{type:"button",class:"cancel del-item",onClick:e=>C.openDelModal(t.id),disabled:T.isLoadingItem===t.id},Z,8,$)])])))),128))]),(0,o._)("div",S,[(0,o.Wm)(H,{to:"/products",class:"btn btn-primary"},{default:(0,o.w5)((()=>[W])),_:1})])])):((0,o.wg)(),(0,o.iD)("section",z,[(0,o._)("div",E,[j,N,U,(0,o.Wm)(H,{to:"/products",class:"btn btn-primary"},{default:(0,o.w5)((()=>[F])),_:1})])]))]),(0,o.Wm)(J),(0,o.Wm)(O,{ref:"SuccessToast",message:T.toastMessage},null,8,["message"]),(0,o.Wm)(P,{ref:"ErrorToast",message:T.toastMessage},null,8,["message"]),(0,o.Wm)(Y,{ref:"DelModal",onDelItem:C.delfavoriteItem,title:T.delteTitle},null,8,["onDelItem","title"]),(0,o.Wm)(q,{ref:"Loading"},null,512)],64)}var J=s(1530),O=s(2676),P=s(5793),Y=s(7257),q=s(7054),K=s(4639),V={name:"FavoriteView",data(){return{favoriteItems:JSON.parse(localStorage.getItem("favorite"))||[],products:[],toastMessage:"",isLoadingItem:"",delteCartId:{},delteTitle:""}},components:{Loading:O.Z,SuccessToast:P.Z,ErrorToast:Y.Z,ServiceList:q.Z,DelModal:K.Z},methods:{addToCart(t,e=1){const s="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/cart",o={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post(s,{data:o}).then((t=>{this.toastMessage=t.data.message,this.$refs.SuccessToast.openToasts(),J.Z.emit("get-cart")})).catch((()=>{this.toastMessage="發生錯誤，請重新加入購物車",this.$refs.ErrorToast.openToasts()})),setTimeout((()=>{this.isLoadingItem=""}),1500)},getProduct(t){const e=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/product/${t}`;this.$refs.Loading.ToggleLoading("on"),this.$http(e).then((t=>{this.products.push(t.data.product)})).catch((()=>{this.toastMessage="發生錯誤，請重新整理",this.$refs.ErrorToast.openToasts()})),this.$refs.Loading.ToggleLoading("off")},getFavorites(){this.products=[],this.favoriteItems.forEach((t=>{this.getProduct(t)}))},openDelModal(t){const e=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/product/${t}`;this.$http(e).then((t=>{this.delteCartId=t.data.product.id,this.delteTitle=t.data.product.title;const e=this.$refs.DelModal;e.openModal()})).catch((()=>{this.toastMessage="發生錯誤，請重新再操作一次",this.$refs.ErrorToast.openToasts()}))},delfavoriteItem(){this.isLoadingItem=this.delteCartId;const t=this.favoriteItems.findIndex((t=>t===this.delteCartId));this.favoriteItems.splice(t,1),this.getFavorites(),J.Z.emit("get-favorites",this.favoriteItems),this.$refs.DelModal.hideModal(),setTimeout((()=>{this.isLoadingItem=""}),1500)}},watch:{favoriteItems:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favoriteItems))},deep:!0}},mounted(){this.getFavorites()}},A=s(3744);const B=(0,A.Z)(V,[["render",H]]);var G=B}}]);
//# sourceMappingURL=958.c91dcdb2.js.map