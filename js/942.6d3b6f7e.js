"use strict";(self["webpackChunkreverie"]=self["webpackChunkreverie"]||[]).push([[942],{3981:function(t,e,s){s.d(e,{Z:function(){return f}});var i=s(6252),a=s(3577),o=s(9963);const r={"aria-label":"Page navigation example"},c={class:"pagination justify-content-center"},n=(0,i._)("span",{"aria-hidden":"true"},"«",-1),l=[n],g={key:0,class:"page-link"},p=["onClick"],d=(0,i._)("span",{"aria-hidden":"true"},"»",-1),u=[d];function h(t,e,s,n,d,h){return(0,i.wg)(),(0,i.iD)("nav",r,[(0,i._)("ul",c,[(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:1===s.pages.current_page}])},[(0,i._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.iM)((t=>h.emitPage(s.pages.current_page-1)),["prevent"]))},l)],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.pages.total_pages,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{class:(0,a.C_)(["page-item",{active:t===s.pages.current_page}]),key:e},[t===s.pages.current_page?((0,i.wg)(),(0,i.iD)("span",g,(0,a.zw)(t),1)):((0,i.wg)(),(0,i.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,o.iM)((e=>h.emitPage(t)),["prevent"])},(0,a.zw)(t),9,p))],2)))),128)),(0,i._)("li",{class:(0,a.C_)(["page-item",{disabled:s.pages.current_page===s.pages.total_pages}])},[(0,i._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.iM)((t=>h.emitPage(s.pages.current_page+1)),["prevent"]))},u)],2)])])}var v={props:["pages"],methods:{emitPage(t){this.$emit("emit-pages",t)}}},m=s(3744);const _=(0,m.Z)(v,[["render",h]]);var f=_},5844:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});var i=s(6252),a=s(3577),o=s(9963);const r=(0,i._)("section",{class:"section-top mb-5"},[(0,i._)("div",{class:"bg-top banner-products pic"},[(0,i._)("div",{class:"text-center w-100 h-100 mask z-index-3 position-relative"},[(0,i._)("div",{class:"position-absolute top-50 start-50 translate-middle"},[(0,i._)("h2",null,"商店"),(0,i._)("p",null,"Our Products")])])])],-1),c={class:"container p-md-5"},n={class:"row"},l={class:"col-lg-3 products-list pe-lg-5"},g={class:"list-group mb-5 justify-content-between flex-row flex-lg-column"},p={class:"products-items col-lg-9"},d={class:"products"},u={class:"row row-cols-2 row-cols-md-3"},h={class:"card-product border"},v={class:"pic ratio ratio-1x1"},m=["src","alt"],_={class:"card-body pb-0"},f={class:"card-title text-center fs-6"},b={class:"badge bg-secondary rounded-pill"},k={class:"price text-center"},w={key:0},y={class:"fs-6 d-inline"},C={key:1},x={class:"fs-6 d-inline text-info fw-bold"},T={class:"text-decoration-line-through fw-light"},$={class:"btn-group mt-2 w-100 border border-primary"},I=["onClick"],M={key:0,class:"bi bi-heart-fill fs-3 text-info"},D={key:1,class:"bi bi-heart fs-3"},L=["onClick","disabled"],P={key:0,class:"mx-auto d-flex align-items-center justify-content-center text-white"},A=(0,i._)("span",{class:"spinner-border me-2 d-none d-lg-block",role:"status","aria-hidden":"true"},null,-1),Z=(0,i._)("span",null,"加入中...",-1),S=[A,Z],z={key:1,class:"bi bi-cart3 fs-3"};function E(t,e,s,A,Z,E){const N=(0,i.up)("router-link"),W=(0,i.up)("Pagination"),j=(0,i.up)("ServiceList"),q=(0,i.up)("SuccessToast"),O=(0,i.up)("ErrorToast"),F=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)("main",null,[r,(0,i._)("section",c,[(0,i._)("div",n,[(0,i._)("div",l,[(0,i._)("div",g,[(0,i._)("a",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:1===Z.isActive}]),"data-bs-toggle":"list","aria-current":"true",onClick:e[0]||(e[0]=(0,o.iM)((t=>E.getCategory()),["prevent"]))}," 全部商品 ",2),(0,i._)("a",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:2===Z.isActive}]),"data-bs-toggle":"list",onClick:e[1]||(e[1]=(0,o.iM)((t=>E.getCategory("冰淇淋")),["prevent"]))},"冰淇淋",2),(0,i._)("a",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:3===Z.isActive}]),"data-bs-toggle":"list",onClick:e[2]||(e[2]=(0,o.iM)((t=>E.getCategory("冰棒")),["prevent"]))},"冰棒",2),(0,i._)("a",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:4===Z.isActive}]),"data-bs-toggle":"list",onClick:e[3]||(e[3]=(0,o.iM)((t=>E.getCategory("蛋糕")),["prevent"]))},"蛋糕",2),(0,i._)("a",{class:(0,a.C_)(["list-group-item list-group-item-action",{active:5===Z.isActive}]),"data-bs-toggle":"list",onClick:e[4]||(e[4]=(0,o.iM)((t=>E.getCategory("手工酥塔")),["prevent"]))},"手工酥塔",2)])]),(0,i._)("div",p,[(0,i._)("div",d,[(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Z.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col align-items-center mb-5",key:t.id},[(0,i._)("div",h,[(0,i.Wm)(N,{to:`/product/${t.id}`,class:"text-decoration-none text-dark hover-scale"},{default:(0,i.w5)((()=>[(0,i._)("div",v,[(0,i._)("img",{src:t.imageUrl,alt:t.title},null,8,m)]),(0,i._)("div",_,[(0,i._)("p",f,[(0,i.Uk)((0,a.zw)(t.title)+" ",1),(0,i._)("span",b,(0,a.zw)(t.category),1)])]),(0,i._)("div",k,[t.origin_price===t.price?((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("p",y,"NT$"+(0,a.zw)(t.price),1)])):((0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("p",x," NT$"+(0,a.zw)(t.price)+"  ",1),(0,i._)("span",T,"NT$"+(0,a.zw)(t.origin_price),1)]))])])),_:2},1032,["to"]),(0,i._)("div",$,[(0,i._)("button",{type:"button",class:"btn text-dark w-25",onClick:e=>E.toggleFavorite(t.id)},[Z.favoriteItems.includes(t.id)?((0,i.wg)(),(0,i.iD)("i",M)):((0,i.wg)(),(0,i.iD)("i",D))],8,I),(0,i._)("button",{type:"button",class:"btn btn-primary w-50",onClick:e=>E.addToCart(t.id),disabled:Z.isLoadingItem===t.id},[Z.isLoadingItem===t.id?((0,i.wg)(),(0,i.iD)("div",P,S)):((0,i.wg)(),(0,i.iD)("i",z))],8,L)])])])))),128))])]),(0,i.Wm)(W,{pages:Z.pagination,onEmitPages:E.getProducts},null,8,["pages","onEmitPages"])])])]),(0,i.Wm)(j),(0,i.Wm)(q,{ref:"SuccessToast",message:Z.toastMessage},null,8,["message"]),(0,i.Wm)(O,{ref:"ErrorToast",message:Z.toastMessage},null,8,["message"]),(0,i.Wm)(F,{ref:"Loading"},null,512)])}var N=s(3981),W=s(1530),j=s(2676),q=s(5793),O=s(7257),F=s(7054),H={name:"ProductsView",data(){return{products:[],pagination:{},isLoadingItem:"",favoriteItems:JSON.parse(localStorage.getItem("favorite"))||[],toastMessage:"",isActive:1}},components:{Pagination:N.Z,Loading:j.Z,SuccessToast:q.Z,ErrorToast:O.Z,ServiceList:F.Z},methods:{getProducts(t=1){this.$refs.Loading.ToggleLoading("on");const e=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/products?page=${t}`;this.$http(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination})).catch((()=>{this.toastMessage="發生錯誤，請重新整理",this.$refs.ErrorToast.openToasts()})),this.$refs.Loading.ToggleLoading("off")},addToCart(t,e=1){const s="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/cart",i={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post(s,{data:i}).then((t=>{this.toastMessage=t.data.message,this.$refs.SuccessToast.openToasts(),W.Z.emit("get-cart")})).catch((()=>{this.toastMessage="發生錯誤，請重新加入購物車",this.$refs.ErrorToast.openToasts()})),setTimeout((()=>{this.isLoadingItem=""}),1e3)},getCategory(t){let e="https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/products";t&&(e=`https://vue3-course-api.hexschool.io/v2/api/kate-hexschool/products?category=${t}`),this.$http(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination})).catch((()=>{this.toastMessage="發生錯誤，請重新選擇",this.$refs.ErrorToast.openToasts()}))},toggleFavorite(t){const e=this.favoriteItems.findIndex((e=>e===t));-1===e?(this.favoriteItems.push(t),W.Z.emit("get-favorites",this.favoriteItems)):(this.favoriteItems.splice(e,1),W.Z.emit("get-favorites",this.favoriteItems))},changeisActive(t){switch(t){case"冰淇淋":this.isActive=2;break;case"冰棒":this.isActive=3;break;case"蛋糕":this.isActive=4;break;case"手工酥塔":this.isActive=5;break;default:this.isActive=1}}},watch:{favoriteItems:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favoriteItems))},deep:!0}},mounted(){this.getCategory(this.$route.query.category),this.changeisActive(this.$route.query.category)}},J=s(3744);const K=(0,J.Z)(H,[["render",E]]);var U=K}}]);
//# sourceMappingURL=942.6d3b6f7e.js.map